
jQuery(document).ready(function(){cfaq_initFaqs()});function cfaq_initFaqs(){jQuery.each(cfaq_faqs.faqs,function(){var a=this;a.plannedSteps=new Array();a.lastSteps=new Array();a.currentStep=0;a.canAnswer=true;a.firstStep=0;a.firstStep=jQuery('#clever_faq[data-faqid="'+a.id+'"] .cfaq_step[data-start="1"]').attr("data-stepid");if(cfaq_faqs.calledStep>0){jQuery('#clever_faq[data-faqid="'+a.id+'"] .cfaq_step[data-start="1"]').hide();cfaq_openStep(cfaq_faqs.calledStep,a.id)}else{if(a.firstStep>0){cfaq_openStep(a.firstStep,a.id)}}})}function cfaq_answerClicked(g){var b=jQuery(g);b.addClass("checked");var a=b.closest("#clever_faq").attr("data-faqid");var f=b.closest(".clever_step");var e=cfaq_getFaqByID(a);var d=false;if(e.canAnswer){e.canAnswer=false;setTimeout(function(){e.canAnswer=true},450);e.lastSteps.push(parseInt(e.currentStep));var c=cfaq_findPotentialsSteps(e.currentStep,a);if(c=="final"){c=e.firstStep;d=true}if(c){setTimeout(function(){if(d){cfaq_restart(a)}else{cfaq_openStep(c,a)}},350)}}}function cfaq_noQuestionClicked(b){var d=cfaq_getFaqByID(b);var a=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-stepid="'+d.currentStep+'"]');var c=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_contactStep');c.slideDown()}function cfaq_getFaqByID(a){var b=false;jQuery.each(cfaq_faqs.faqs,function(){if(this.id==a){b=this}});return b}function cfaq_previousStepClicked(b){var c=cfaq_getFaqByID(b);var a=false;var e=0;var d=0;jQuery.each(c.lastSteps,function(f){var g=parseInt(this);if(parseInt(g)==parseInt(c.lastSteps[c.lastSteps.length-1])){a=true;e=g;d=f}});c.lastSteps.pop();if(e>0){cfaq_openStep(e,b)}else{cfaq_restart(b)}}function cfaq_openStep(f,b){var e=cfaq_getFaqByID(b);var d=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-stepid="'+f+'"]');d.find(".cfaq_answers li a").removeClass("checked");if(e.lastSteps.length>0){d.find("li.cfaq_previousStep").show()}else{d.find("li.cfaq_previousStep").hide()}var a=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-stepid="'+e.currentStep+'"]');a.slideUp();e.currentStep=f;jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_contactStep').slideUp();d.slideDown();if(!d.is('[data-start="1"]')){jQuery("body,html").animate({scrollTop:jQuery('#clever_faq[data-faqid="'+b+'"]').offset().top-40},200)}if(d.find(".cfaq_answers > li:not(.cfaq_noQuestion):not(.cfaq_restartFaq)").length==1){d.find(".cfaq_answers > li:not(.cfaq_noQuestion):not(.cfaq_restartFaq)").addClass("checked");var c=cfaq_findPotentialsSteps(e.currentStep,b);if(c=="final"){d.find(".cfaq_restartFaq").hide()}d.find(".cfaq_answers > li:not(.cfaq_noQuestion):not(.cfaq_restartFaq)").removeClass("checked")}}function cfaq_restart(b){var c=cfaq_getFaqByID(b);var a=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-stepid="'+c.currentStep+'"]');a.slideUp();c.plannedSteps=new Array();c.lastSteps=new Array();c.currentStep=0;jQuery('#clever_faq[data-faqid="'+b+'"] li>a.checked').removeClass("checked");jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_finalText').fadeOut();jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_restartFaq').show();c.firstStep=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-start="1"]').attr("data-stepid");cfaq_openStep(jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-start="1"]').attr("data-stepid"),b)}function cfaq_findPotentialsSteps(f,b){var c=cfaq_getFaqByID(b);var d=new Array();var a=new Array();var e=new Array();var g=0;jQuery.each(c.links,function(){var j=this;if(j.originID==f){var i=false;var h=true;if(j.conditions&&j.conditions!="[]"){j.conditionsO=JSON.parse(j.conditions);var k=cfaq_checkConditions(j.conditionsO,b);i=k.error;h=k.errorOR}else{e.push(j.destinationID)}if((j.operator=="OR"&&!h)||(j.operator!="OR"&&!i)){j.conditionsO=JSON.parse(j.conditions);a.push({stepID:parseInt(j.destinationID),nbConditions:j.conditionsO.length});if(j.conditionsO.length>g){g=j.conditionsO.length}d.push(parseInt(j.destinationID))}}});if(f==0){d.push(parseInt(jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step[data-start="1"]').attr("data-stepid")))}if(d.length==0){d.push("final")}else{if(e.length>0&&e.length<d.length){jQuery.each(e,function(){var h=this;d=jQuery.grep(d,function(i){return i!=h})});if(g>0){jQuery.each(d,function(h){jQuery.each(a,function(i){if(i.stepID==h&&i.nbConditions<g){d=jQuery.grep(d,function(j){return j!=h})}})})}}}return d}function cfaq_checkConditions(d,b){var c=false;var a=true;jQuery.each(d,function(){var h=this;if(h.interaction.substr(0,1)!="_"){var g=h.interaction.substr(0,h.interaction.indexOf("_"));var f=h.interaction.substr(h.interaction.indexOf("_")+1,h.interaction.length);var e=jQuery('#clever_faq[data-faqid="'+b+'"] [data-itemid="'+f+'"]');switch(h.action){case"clicked":if(!e.is(".checked")){c=true}if(e.is(".checked")){a=false}break;case"unclicked":if(e.is(".checked")){c=true}if(!e.is(".checked")){a=false}break}}});return{error:c,errorOR:a}}function cfaq_sendQuestion(b){var d=cfaq_getFaqByID(b);var e=false;var c=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_contactStep').find('textarea[name="question"]');var a=jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_contactStep').find('input[name="email"]');c.removeClass("cfaq_error");a.removeClass("cfaq_error");if(c.val().length<3){e=true;c.addClass("cfaq_error")}if(!cfaq_checkEmail(a.val())){e=true;a.addClass("cfaq_error")}if(!e){jQuery.ajax({url:cfaq_faqs.ajaxurl,type:"post",data:{action:"cfaq_sendQuestion",question:c.val(),email:a.val(),faqID:b},success:function(){c.val("");jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_step').slideUp();jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_contactStep').slideUp();setTimeout(function(){jQuery('#clever_faq[data-faqid="'+b+'"] .cfaq_finalText').fadeIn();setTimeout(function(){cfaq_restart(b)},d.resetDelay*1000)},400)}})}}function cfaq_checkEmail(a){if(a.indexOf("@")!="-1"&&a.indexOf(".")!="-1"&&a!=""){return true}return false}function cfaq_closeContactStep(a){jQuery('#clever_faq[data-faqid="'+a+'"] .cfaq_contactStep').slideUp();jQuery("body,html").animate({scrollTop:jQuery('#clever_faq[data-faqid="'+a+'"]').offset().top-40},200)}function cfaq_restartFaqClicked(a){var b=cfaq_getFaqByID(a);jQuery('#clever_faq[data-faqid="'+a+'"] .cfaq_step').slideUp();jQuery('#clever_faq[data-faqid="'+a+'"] .cfaq_contactStep').slideUp();cfaq_restart(a)};